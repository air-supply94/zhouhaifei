(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports,require('mobx'),require('react'),require('react-dom')):typeof define==='function'&&define.amd?define(['exports','mobx','react','react-dom'],factory):(global=global||self,factory(global.mobxReactLite={},global.mobx,global.React,global.ReactDOM));}(this,(function(exports,mobx,React,reactDom){'use strict';var React__default='default'in React?React['default']:React;if(!React.useState){throw new Error("mobx-react-lite requires React with Hooks support");}if(!mobx.spy){throw new Error("mobx-react-lite requires mobx at least version 4 to be available");}function useForceUpdate(){var _useState=React.useState(0),setTick=_useState[1];var update=React.useCallback(function(){setTick(function(tick){return tick+1;});},[]);return update;}function isPlainObject(value){if(!value||typeof value!=="object"){return false;}var proto=Object.getPrototypeOf(value);return!proto||proto===Object.prototype;}function getSymbol(name){if(typeof Symbol==="function"){return Symbol.for(name);}return"__$mobx-react "+name+"__";}var mockGlobal={};function getGlobal(){if(typeof window!=="undefined"){return window;}if(typeof global!=="undefined"){return global;}if(typeof self!=="undefined"){return self;}return mockGlobal;}var observerBatchingConfiguredSymbol=getSymbol("observerBatching");function defaultNoopBatch(callback){callback();}function observerBatching(reactionScheduler){if(!reactionScheduler){reactionScheduler=defaultNoopBatch;{console.warn("[MobX] Failed to get unstable_batched updates from react-dom / react-native");}}mobx.configure({reactionScheduler:reactionScheduler});getGlobal()[observerBatchingConfiguredSymbol]=true;}var isObserverBatched=function isObserverBatched(){return!!getGlobal()[observerBatchingConfiguredSymbol];};var globalIsUsingStaticRendering=false;function useStaticRendering(enable){globalIsUsingStaticRendering=enable;}function isUsingStaticRendering(){return globalIsUsingStaticRendering;}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function printDebugValue(v){return mobx.getDependencyTree(v);}function createTrackingData(reaction){var trackingData={cleanAt:Date.now()+CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS,reaction:reaction};return trackingData;}var CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS=10000;var CLEANUP_TIMER_LOOP_MILLIS=10000;var uncommittedReactionRefs=new Set();var reactionCleanupHandle;function ensureCleanupTimerRunning(){if(reactionCleanupHandle===undefined){reactionCleanupHandle=setTimeout(cleanUncommittedReactions,CLEANUP_TIMER_LOOP_MILLIS);}}function scheduleCleanupOfReactionIfLeaked(ref){uncommittedReactionRefs.add(ref);ensureCleanupTimerRunning();}function recordReactionAsCommitted(reactionRef){uncommittedReactionRefs.delete(reactionRef);}function cleanUncommittedReactions(){reactionCleanupHandle=undefined;var now=Date.now();uncommittedReactionRefs.forEach(function(ref){var tracking=ref.current;if(tracking){if(now>=tracking.cleanAt){tracking.reaction.dispose();ref.current=null;uncommittedReactionRefs.delete(ref);}}});if(uncommittedReactionRefs.size>0){ensureCleanupTimerRunning();}}var insideRender=false;var forceUpdateQueue=[];function useQueuedForceUpdate(forceUpdate){return function(){if(insideRender){forceUpdateQueue.push(forceUpdate);}else{forceUpdate();}};}function useQueuedForceUpdateBlock(callback){insideRender=true;forceUpdateQueue=[];try{var result=callback();insideRender=false;var queue=forceUpdateQueue.length>0?forceUpdateQueue:undefined;React__default.useLayoutEffect(function(){if(queue){queue.forEach(function(x){return x();});}},[queue]);return result;}finally{insideRender=false;}}var EMPTY_OBJECT={};function observerComponentNameFor(baseComponentName){return"observer"+baseComponentName;}function useObserver(fn,baseComponentName,options){if(baseComponentName===void 0){baseComponentName="observed";}if(options===void 0){options=EMPTY_OBJECT;}if(isUsingStaticRendering()){return fn();}var wantedForceUpdateHook=options.useForceUpdate||useForceUpdate;var forceUpdate=wantedForceUpdateHook();var queuedForceUpdate=useQueuedForceUpdate(forceUpdate);var reactionTrackingRef=React__default.useRef(null);if(!reactionTrackingRef.current){var newReaction=new mobx.Reaction(observerComponentNameFor(baseComponentName),function(){if(trackingData.mounted){queuedForceUpdate();}else{newReaction.dispose();reactionTrackingRef.current=null;}});var trackingData=createTrackingData(newReaction);reactionTrackingRef.current=trackingData;scheduleCleanupOfReactionIfLeaked(reactionTrackingRef);}var reaction=reactionTrackingRef.current.reaction;React__default.useDebugValue(reaction,printDebugValue);React__default.useEffect(function(){recordReactionAsCommitted(reactionTrackingRef);if(reactionTrackingRef.current){reactionTrackingRef.current.mounted=true;}else{reactionTrackingRef.current={reaction:new mobx.Reaction(observerComponentNameFor(baseComponentName),function(){queuedForceUpdate();}),cleanAt:Infinity};queuedForceUpdate();}return function(){reactionTrackingRef.current.reaction.dispose();reactionTrackingRef.current=null;};},[]);return useQueuedForceUpdateBlock(function(){var rendering;var exception;reaction.track(function(){try{rendering=fn();}catch(e){exception=e;}});if(exception){throw exception;}return rendering;});}function observer(baseComponent,options){if(isUsingStaticRendering()){return baseComponent;}var realOptions=_extends({forwardRef:false},options);var baseComponentName=baseComponent.displayName||baseComponent.name;var wrappedComponent=function wrappedComponent(props,ref){return useObserver(function(){return baseComponent(props,ref);},baseComponentName);};wrappedComponent.displayName=baseComponentName;var memoComponent;if(realOptions.forwardRef){memoComponent=React.memo(React.forwardRef(wrappedComponent));}else{memoComponent=React.memo(wrappedComponent);}copyStaticProperties(baseComponent,memoComponent);memoComponent.displayName=baseComponentName;return memoComponent;}var hoistBlackList={$$typeof:true,render:true,compare:true,type:true};function copyStaticProperties(base,target){Object.keys(base).forEach(function(key){if(!hoistBlackList[key]){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(base,key));}});}function ObserverComponent(_ref){var children=_ref.children,render=_ref.render;var component=children||render;if(typeof component!=="function"){return null;}return useObserver(component);}ObserverComponent.propTypes={children:ObserverPropsCheck,render:ObserverPropsCheck};ObserverComponent.displayName="Observer";function ObserverPropsCheck(props,key,componentName,location,propFullName){var extraKey=key==="children"?"render":"children";var hasProp=typeof props[key]==="function";var hasExtraProp=typeof props[extraKey]==="function";if(hasProp&&hasExtraProp){return new Error("MobX Observer: Do not use children and render in the same time in`"+componentName);}if(hasProp||hasExtraProp){return null;}return new Error("Invalid prop `"+propFullName+"` of type `"+typeof props[key]+"` supplied to"+" `"+componentName+"`, expected `function`.");}function useAsObservableSourceInternal(current,usedByLocalStore){var culprit=usedByLocalStore?"useLocalStore":"useAsObservableSource";if(usedByLocalStore){var _React$useState=React__default.useState(current),initialSource=_React$useState[0];if(initialSource!==undefined&&current===undefined||initialSource===undefined&&current!==undefined){throw new Error("make sure you never pass `undefined` to "+culprit);}}if(usedByLocalStore&&current===undefined){return undefined;}if(!isPlainObject(current)){throw new Error(culprit+" expects a plain object as "+(usedByLocalStore?"second":"first")+" argument");}var _React$useState2=React__default.useState(function(){return mobx.observable(current,{},{deep:false});}),res=_React$useState2[0];if(Object.keys(res).length!==Object.keys(current).length){throw new Error("the shape of objects passed to "+culprit+" should be stable");}mobx.runInAction(function(){Object.assign(res,current);});return res;}function useAsObservableSource(current){return useAsObservableSourceInternal(current,false);}function useLocalStore(initializer,current){var source=useAsObservableSourceInternal(current,true);return React__default.useState(function(){var local=mobx.observable(initializer(source));if(isPlainObject(local)){mobx.runInAction(function(){Object.keys(local).forEach(function(key){var value=local[key];if(typeof value==="function"){local[key]=wrapInTransaction(value,local);}});});}return local;})[0];}function wrapInTransaction(fn,context){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return mobx.transaction(function(){return fn.apply(context,args);});};}observerBatching(reactDom.unstable_batchedUpdates);exports.Observer=ObserverComponent;exports.isObserverBatched=isObserverBatched;exports.isUsingStaticRendering=isUsingStaticRendering;exports.observer=observer;exports.observerBatching=observerBatching;exports.useAsObservableSource=useAsObservableSource;exports.useForceUpdate=useForceUpdate;exports.useLocalStore=useLocalStore;exports.useObserver=useObserver;exports.useQueuedForceUpdate=useQueuedForceUpdate;exports.useQueuedForceUpdateBlock=useQueuedForceUpdateBlock;exports.useStaticRendering=useStaticRendering;Object.defineProperty(exports,'__esModule',{value:true});})));
